<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/js/githubOauth.js | canvas-template</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js">js</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/BOM.js~BOMEntry.html">BOMEntry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/display.js~Display.html">Display</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/globalvariables.js~GlobalVariables.html">GlobalVariables</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/localmenu.js~Localmenu.html">Localmenu</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-extractBomTags">extractBomTags</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-addOrDeletePorts">addOrDeletePorts</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-GitHubModule">GitHubModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-cmenu">cmenu</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-globalVariables">globalVariables</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-localmenu">localmenu</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js-molecules">js/molecules</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/BOM.js~AddBOMTag.html">AddBOMTag</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/OverCutCorners.js~OverCutCorners.html">OverCutCorners</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/assembly.js~Assembly.html">Assembly</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/circle.js~Circle.html">Circle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/code.js~Code.html">Code</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/color.js~Color.html">Color</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/constant.js~Constant.html">Constant</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/cutlayout.js~CutLayout.html">CutLayout</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/cutlist.js~CutList.html">CutList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/difference.js~Difference.html">Difference</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/equation.js~Equation.html">Equation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/extracttag.js~ExtractTag.html">ExtractTag</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/extrude.js~Extrude.html">Extrude</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/gcode.js~Gcode.html">Gcode</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/githubmolecule.js~GitHubMolecule.html">GitHubMolecule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/input.js~Input.html">Input</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/intersection.js~Intersection.html">Intersection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/molecule.js~Molecule.html">Molecule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/output.js~Output.html">Output</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/readme.js~Readme.html">Readme</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/rectangle.js~Rectangle.html">Rectangle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/regularPolygon.js~RegularPolygon.html">RegularPolygon</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/rotate.js~Rotate.html">Rotate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/scale.js~Scale.html">Scale</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/shrinkwrap.js~ShrinkWrap.html">ShrinkWrap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/stl.js~Stl.html">Stl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/stretch.js~Stretch.html">Stretch</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/svg.js~Svg.html">Svg</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/tag.js~Tag.html">Tag</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/molecules/translate.js~Translate.html">Translate</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#js-prototypes">js/prototypes</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/prototypes/atom.js~Atom.html">Atom</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/prototypes/attachmentpoint.js~AttachmentPoint.html">AttachmentPoint</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/js/prototypes/connector.js~Connector.html">Connector</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/js/githubOauth.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import Molecule from &apos;./molecules/molecule.js&apos;
import GlobalVariables from &apos;./globalvariables.js&apos;
import { extractBomTags } from &apos;./BOM.js&apos;
import { OAuth } from &apos;oauthio-web&apos;

/**
 * This function works like a class to sandbox interaction with GitHub.
 */
export default function GitHubModule(){
    const Octokit = require(&apos;@octokit/rest&apos;)
    /** 
     * The octokit instance which allows authenticated interaction with GitHub.
     * @type {object}
     */
    var octokit = new Octokit()
    /** 
     * The HTML element which is the popup.
     * @type {object}
     */
    var popup = document.getElementById(&apos;projects-popup&apos;)
    /** 
     * The name of the current repo.
     * @type {string}
     */
    var currentRepoName = null
    /** 
     * The name of the currently logged in user.
     * @type {string}
     */
    var currentUser = null
    /** 
     * The text to display at the top of the bill of materials.
     * @type {string}
     */
    var bomHeader = &quot;###### Note: Do not edit this file directly, it is automatically generated from the CAD model \n# Bill Of Materials \n |Part|Number Needed|Price|Source| \n |----|----------|-----|-----|&quot;
     
    /** 
     * The text to display at the top of the ReadMe file.
     * @type {string}
     */
    var readmeHeader = &quot;###### Note: Do not edit this file directly, it is automatically generated from the CAD model&quot;

    /** 
     * The timer used to trigger saving of the file.
     * @type {object}
     */
    var intervalTimer

    /** 
     * Flag for active tab
     * @type {string}
     */
    var myTab = &quot;yoursButton&quot;

    //Github pop up event listeners
    document.getElementById(&quot;loginButton&quot;).addEventListener(&quot;mousedown&quot;, () =&gt; {
        this.tryLogin()
    })
    document.getElementById(&quot;browseNonGit&quot;).addEventListener(&quot;mousedown&quot;, () =&gt; {
        this.browseNonGit()
    })
    
    /** 
     * Try to login using the oauth popup.
     */
    this.tryLogin = function(){
        
        // Initialize with OAuth.io app public key
        if(window.location.href.includes(&apos;private&apos;)){
            OAuth.initialize(&apos;6CQQE8MMCBFjdWEjevnTBMCQpsw&apos;) //app public key for repo scope
        }
        else{
            OAuth.initialize(&apos;BYP9iFpD7aTV9SDhnalvhZ4fwD8&apos;) //app public key for public_repo scope
        }
        // Use popup for oauth
        OAuth.popup(&apos;github&apos;).then(github =&gt; {
            
            octokit = new Octokit({
                auth: github.access_token
            })
            
            //Test the authentication 
            octokit.users.getAuthenticated({}).then(result =&gt; {
                currentUser = result.data.login
                this.showProjectsToLoad()
            })
        })
    }
    
    /** 
     * Display projects which can be loaded in the popup.
     */
    this.showProjectsToLoad = function(){
        //Remove everything in the popup now
        while (popup.firstChild) {
            popup.removeChild(popup.firstChild)
        }
        
        popup.classList.remove(&apos;off&apos;)
        popup.setAttribute(&quot;style&quot;, &quot;padding: 0;text-align: center; background-color: #f9f6f6; border: 10px solid #3e3d3d;&quot;)
        
        //Close button (Mac style)
        if(GlobalVariables.topLevelMolecule &amp;&amp; GlobalVariables.topLevelMolecule.name != &quot;Maslow Create&quot;){ //Only offer a close button if there is a project to go back to
            var closeButton = document.createElement(&quot;button&quot;)
            closeButton.setAttribute(&quot;class&quot;, &quot;closeButton&quot;)
            closeButton.addEventListener(&quot;click&quot;, () =&gt; {
                popup.classList.add(&apos;off&apos;)
            })
            popup.appendChild(closeButton)
        }
        //Welcome title
        var welcome = document.createElement(&quot;div&quot;)
        welcome.setAttribute(&quot;style&quot;, &quot; display: flex; margin: 10px; align-items: center;&quot;)
        popup.appendChild(welcome)

        var welcome1 = document.createElement(&quot;IMG&quot;)
        welcome1.setAttribute(&quot;src&quot;, &quot;/imgs/maslow-logo.png&quot; )
        welcome1.setAttribute(&quot;style&quot;, &quot; height:25px; border-radius:50%;&quot;)
        welcome.appendChild(welcome1)
        var welcome2 = document.createElement(&quot;IMG&quot;)
        welcome2.setAttribute(&quot;src&quot;, &quot;/imgs/maslowcreate.svg&quot; )
        welcome2.setAttribute(&quot;style&quot;, &quot;height:20px; padding: 10px;&quot;)
        welcome.appendChild(welcome2)
 
        var tabButtons = document.createElement(&quot;DIV&quot;)
        tabButtons.setAttribute(&quot;class&quot;, &quot;tab&quot;)
        //tabButtons.setAttribute(&quot;style&quot;, &quot;display: none;&quot;)
        popup.appendChild(tabButtons)
        
        //My projects button
        var yoursButton = document.createElement(&quot;button&quot;)
        yoursButton.setAttribute(&quot;class&quot;, &quot;tablinks active browseButton&quot;)
        yoursButton.appendChild(document.createTextNode(&quot;Back to my projects&quot;))
        yoursButton.setAttribute(&quot;id&quot;, &quot;yoursButton&quot;)
        tabButtons.appendChild(yoursButton)
        
        var topBrowseDiv = document.createElement(&quot;div&quot;)
        popup.appendChild(topBrowseDiv)

        //New project div
        var createNewProject = document.createElement(&quot;div&quot;)
        createNewProject.setAttribute(&quot;class&quot;, &quot;newProject&quot;)
        topBrowseDiv.appendChild(createNewProject) 
        this.NewProject(&quot;New Project&quot;, null, true, &quot;newProject.svg&quot;)

        //Browse all projects box
        var browseDiv = document.createElement(&quot;div&quot;)
        browseDiv.classList.add(&quot;newProject&quot;)
        var browseDivInner = document.createElement(&quot;div&quot;)
        browseDiv.appendChild(browseDivInner)
        browseDivInner.classList.add(&quot;newProjectdiv&quot;)
        browseDivInner.classList.add(&quot;tablinks&quot;) 
        browseDivInner.setAttribute(&quot;id&quot;, &quot;githubButton&quot;)

        var projectPicture = document.createElement(&quot;IMG&quot;)
        projectPicture.setAttribute(&quot;src&quot;, &apos;/defaultThumbnail.svg&apos;)
        projectPicture.setAttribute(&quot;style&quot;, &quot;height: 80%;&quot;)
        browseDivInner.appendChild(projectPicture)
        
        //Browse Prompt
        var checkOut = document.createElement(&quot;div&quot;)
        browseDivInner.appendChild(checkOut)
        checkOut.innerHTML = &quot;Check out what others have made on Maslow Create&quot;
        checkOut.setAttribute(&quot;style&quot;, &quot;align-self:center; width:70%&quot;)

        topBrowseDiv.appendChild(browseDiv) 
        topBrowseDiv.setAttribute(&quot;class&quot;, &quot;topBrowse&quot;)
        
        //My projects title
        var mine = document.createElement(&quot;div&quot;)
        mine.innerHTML = &quot;My Projects&quot;
        mine.setAttribute(&quot;style&quot;, &quot;justify-content:flex-start;display: inline; align-self: flex-start; margin-left: 30px; margin-top: 15px;&quot;)
        popup.appendChild(mine)
     
        var middleBrowseDiv = document.createElement(&quot;div&quot;)
        middleBrowseDiv.setAttribute(&quot;class&quot;, &quot;middleBrowse&quot;)
        popup.appendChild(middleBrowseDiv)

        /*
        //Filter Dropdown
        var filterDiv = document.createElement(&quot;div&quot;)
        var filterLabel = document.createElement(&quot;LABEL&quot;)
        filterLabel.textContent = &quot;Sort by&quot;
        filterLabel.setAttribute(&quot;style&quot;,&quot;padding-top: 12px; font-size: 12px&quot;)
        middleBrowseDiv.appendChild(filterLabel)
        filterDiv.setAttribute(&quot;class&quot;,&quot;custom-select&quot;)
        //filterDiv.setAttribute(&quot;style&quot;,&quot;margin-right:0; width:200px&quot;)
        var filterDrop = document.createElement(&quot;select&quot;)
        filterDrop.setAttribute(&quot;id&quot;,&quot;filterDrop&quot;)


        var filterDrop1 = document.createElement(&quot;option&quot;)
        filterDrop1.textContent = &quot;stars&quot;
        filterDrop1.setAttribute(&quot;value&quot;,&quot;1&quot;)
        filterDrop.appendChild(filterDrop1)
        var filterDrop2 = document.createElement(&quot;option&quot;)
        filterDrop2.textContent = &quot;updated&quot;
        filterDrop2.setAttribute(&quot;value&quot;,&quot;2&quot;)
        filterDrop.appendChild(filterDrop2)
        var filterDrop3 = document.createElement(&quot;option&quot;)
        filterDrop3.textContent = &quot;Forks&quot;
        filterDrop3.setAttribute(&quot;value&quot;,&quot;3&quot;)
        filterDrop.appendChild(filterDrop3)  

        middleBrowseDiv.appendChild(filterDiv)
        filterDiv.appendChild(filterDrop) */

        var searchIcon = document.createElement(&quot;IMG&quot;)
        searchIcon.setAttribute(&quot;src&quot;, &apos;/imgs/search_icon.svg&apos;)
        searchIcon.setAttribute(&quot;style&quot;, &quot;width: 20px; float: right; color: white; position: relative;right: 3px; opacity: 0.5;&quot;)
        middleBrowseDiv.appendChild(searchIcon)

        var searchBar = document.createElement(&quot;input&quot;)
        searchBar.setAttribute(&quot;type&quot;, &quot;text&quot;)
        searchBar.setAttribute(&quot;placeholder&quot;, &quot;Search for project..&quot;)
        searchBar.setAttribute(&quot;class&quot;, &quot;menu_search&quot;)
        searchBar.setAttribute(&quot;id&quot;, &quot;project_search&quot;)
        middleBrowseDiv.appendChild(searchBar)

        //Display option buttons
        var browseDisplay1 = document.createElement(&quot;div&quot;)
        browseDisplay1.setAttribute(&quot;class&quot;, &quot;browseDisplay&quot;)
        var listPicture = document.createElement(&quot;IMG&quot;)
        listPicture.setAttribute(&quot;src&quot;, &apos;/imgs/list-with-dots.svg&apos;) //https://www.freeiconspng.com/img/1454
        listPicture.setAttribute(&quot;style&quot;, &quot;height: 75%;padding: 3px;&quot;)
        browseDisplay1.appendChild(listPicture)
        middleBrowseDiv.appendChild(browseDisplay1)
        var browseDisplay2 = document.createElement(&quot;div&quot;)
        browseDisplay2.setAttribute(&quot;class&quot;, &quot;browseDisplay active_filter&quot;)
        browseDisplay2.setAttribute(&quot;id&quot;, &quot;thumb&quot;)
        var listPicture2 = document.createElement(&quot;IMG&quot;)
        listPicture2.setAttribute(&quot;src&quot;, &apos;/imgs/thumb_icon.png&apos;) 
        listPicture2.setAttribute(&quot;style&quot;, &quot;height: 80%;padding: 3px;&quot;)
        browseDisplay2.appendChild(listPicture2)
        middleBrowseDiv.appendChild(browseDisplay2)

        //Input to search for projects

        /*var middleBrowseDiv2 = document.createElement(&quot;div&quot;)
        middleBrowseDiv2.setAttribute(&quot;class&quot;, &quot;middleBrowse2&quot;)
        popup.appendChild(middleBrowseDiv2) */

        searchBar.addEventListener(&apos;keyup&apos;, (e) =&gt; {
            //var opt = document.getElementById(&quot;filterDrop&quot;)
            //var strUser = opt.options[opt.selectedIndex].textContent
            this.loadProjectsBySearch(e, searchBar.value, &quot;updated&quot;) // updated just sorts content by most recently updated
        })
        /*filterDiv.addEventListener(&quot;change&quot;, (e) =&gt; {

            var opt = document.getElementById(&quot;filterDrop&quot;)
            opt.classList.toggle(&quot;open&quot;)
            var strUser = opt.options[opt.selectedIndex].textContent
            this.loadProjectsBySearch(e, searchBar.value, strUser)
            
        })*/
        //header for project list style display
        var titlesDiv = document.createElement(&quot;div&quot;)
        titlesDiv.setAttribute(&quot;id&quot;,&quot;titlesDiv&quot;)
        var titles = document.createElement(&quot;div&quot;)
        titles.innerHTML = &quot;&quot;
        titles.setAttribute(&quot;class&quot;,&quot;browseColumn&quot;)
        titlesDiv.appendChild(titles)
        var titles2 = document.createElement(&quot;div&quot;)
        titles2.innerHTML = &quot;Project&quot;
        titles2.setAttribute(&quot;class&quot;,&quot;browseColumn&quot;)
        titlesDiv.appendChild(titles2)
        var titles3 = document.createElement(&quot;div&quot;)
        titles3.innerHTML = &quot;Creator&quot;
        titles3.setAttribute(&quot;class&quot;,&quot;browseColumn&quot;)
        titlesDiv.appendChild(titles3)
        var titles4 = document.createElement(&quot;div&quot;)
        titles4.innerHTML = &quot;Created on&quot;
        titles4.setAttribute(&quot;class&quot;,&quot;browseColumn&quot;)
        titlesDiv.appendChild(titles4)
        var titles5 = document.createElement(&quot;div&quot;)
        titles5.innerHTML = &quot;Last Modified&quot;
        titles5.setAttribute(&quot;class&quot;,&quot;browseColumn&quot;)
        titlesDiv.appendChild(titles5)

        popup.appendChild(titlesDiv)


        //Event listeners 

        yoursButton.addEventListener(&quot;click&quot;, (e) =&gt; {
            mine.innerHTML = &quot;My Projects&quot;
            yoursButton.setAttribute(&quot;style&quot;, &quot;display:block&quot;)
            myTab = &quot;yoursButton&quot;
            this.openTab(e, &quot;yoursButton&quot;)
        })
        browseDivInner.addEventListener(&quot;click&quot;, (e) =&gt; {

            mine.innerHTML = &quot;All Maslow Create Projects&quot;
            myTab = &quot;githubButton&quot;
            this.openTab(e, &quot;githubButton&quot;)
        })
        browseDisplay1.addEventListener(&quot;click&quot;, () =&gt; {
            titlesDiv.style.display = &quot;flex&quot;
            browseDisplay2.classList.remove(&quot;active_filter&quot;)
            this.openTab(document.getElementById(myTab), myTab)
        })
        browseDisplay2.addEventListener(&quot;click&quot;, () =&gt; {
            titlesDiv.style.display = &quot;none&quot;
            browseDisplay2.classList.add(&quot;active_filter&quot;)
            this.openTab(document.getElementById(myTab), myTab)
        })

        this.projectsSpaceDiv = document.createElement(&quot;DIV&quot;)
        this.projectsSpaceDiv.setAttribute(&quot;class&quot;, &quot;float-left-div&quot;)
        this.projectsSpaceDiv.setAttribute(&quot;style&quot;, &quot;overflow-x: hidden; margin-top: 10px; border-top: 1px solid #44444442;&quot;)
        popup.appendChild(this.projectsSpaceDiv)
        
        yoursButton.click()
    }

    /** 
     * Create a page pop up that displays all projects without logging into github  
     */
    this.browseNonGit = function(){
        //Remove everything in the popup now
        while (popup.firstChild) {
            popup.removeChild(popup.firstChild)
        }
        
        popup.classList.remove(&apos;off&apos;)
        popup.setAttribute(&quot;style&quot;, &quot;text-align: center; padding: 0&quot;)

        //Welcome title
        var welcome = document.createElement(&quot;div&quot;)
        welcome.setAttribute(&quot;style&quot;, &quot; display: flex; margin: 10px; align-items: center;&quot;)
        popup.appendChild(welcome)

        var welcome1 = document.createElement(&quot;IMG&quot;)
        welcome1.setAttribute(&quot;src&quot;, &quot;/imgs/maslow-logo.png&quot; )
        welcome1.setAttribute(&quot;style&quot;, &quot; height:25px; border-radius:50%;&quot;)
        welcome.appendChild(welcome1)
        var welcome2 = document.createElement(&quot;IMG&quot;)
        welcome2.setAttribute(&quot;src&quot;, &quot;/imgs/maslowcreate.svg&quot; )
        welcome2.setAttribute(&quot;style&quot;, &quot;height:20px; padding: 10px;&quot;)
        welcome.appendChild(welcome2)

        var githubSign = document.createElement(&quot;button&quot;)
        githubSign.setAttribute(&quot;id&quot;, &quot;loginButton2&quot; )
        githubSign.setAttribute(&quot;class&quot;, &quot;form browseButton githubSign&quot;)
        githubSign.setAttribute(&quot;style&quot;, &quot;width: 90px; font-size: .7rem; margin-left: auto;&quot;)
        githubSign.textContent = &quot;Login&quot;
        welcome.appendChild(githubSign)   

        var githubSignUp = document.createElement(&quot;button&quot;)
        githubSignUp.setAttribute(&quot;class&quot;, &quot;form browseButton githubSign&quot;)
        githubSignUp.setAttribute(&quot;onclick&quot;, &quot;window.open(&apos;https://github.com/join&apos;)&quot;)
        githubSignUp.setAttribute(&quot;style&quot;, &quot;width: 130px; font-size: .7rem;margin-left: 5px;&quot;)
        githubSignUp.textContent = &quot;Create an account&quot;
        welcome.appendChild(githubSignUp)  

        //Welcome title
        var welcome3 = document.createElement(&quot;div&quot;)
        welcome3.innerHTML = &quot;Maslow Create User Projects&quot;
        welcome3.setAttribute(&quot;style&quot;, &quot;justify-content: flex-start; display: inline; width: 100%; font-size: 18px;&quot;)
        popup.appendChild(welcome3)
        
        var topBrowseDiv = document.createElement(&quot;div&quot;)
        popup.appendChild(topBrowseDiv)

        var middleBrowseDiv = document.createElement(&quot;div&quot;)
        middleBrowseDiv.setAttribute(&quot;class&quot;, &quot;middleBrowse&quot;)
        middleBrowseDiv.setAttribute(&quot;style&quot;, &quot;margin-top:10px&quot;)
        popup.appendChild(middleBrowseDiv)

        var searchIcon = document.createElement(&quot;IMG&quot;)
        searchIcon.setAttribute(&quot;src&quot;, &apos;/imgs/search_icon.svg&apos;)
        searchIcon.setAttribute(&quot;style&quot;, &quot;width: 20px; float: right; color: white; align-self: flex-end; position: relative;right: 3px; opacity: 0.5;&quot;)
        middleBrowseDiv.appendChild(searchIcon)

        var searchBar = document.createElement(&quot;input&quot;)
        searchBar.setAttribute(&quot;type&quot;, &quot;text&quot;)
        searchBar.setAttribute(&quot;placeholder&quot;, &quot;Search for project..&quot;)
        searchBar.setAttribute(&quot;class&quot;, &quot;menu_search&quot;)
        searchBar.setAttribute(&quot;id&quot;, &quot;project_search&quot;)
        middleBrowseDiv.appendChild(searchBar)

        /*temporarily removed //Filter Dropdown
        var filterDiv = document.createElement(&quot;div&quot;)
        var filterLabel = document.createElement(&quot;LABEL&quot;)
        filterLabel.textContent = &quot;Sort by&quot;
        filterLabel.setAttribute(&quot;style&quot;,&quot;padding-top: 12px; font-size: 12px&quot;)
        middleBrowseDiv.appendChild(filterLabel)
        filterDiv.setAttribute(&quot;class&quot;,&quot;custom-select&quot;)
        //filterDiv.setAttribute(&quot;style&quot;,&quot;margin-right:0; width:200px&quot;)
        var filterDrop = document.createElement(&quot;select&quot;)
        filterDrop.setAttribute(&quot;id&quot;,&quot;filterDrop&quot;)
        filterDrop.setAttribute(&quot;class&quot;,&quot;select-box1&quot;)

        var filterDrop1 = document.createElement(&quot;option&quot;)
        filterDrop1.textContent = &quot;stars&quot;
        filterDrop1.setAttribute(&quot;value&quot;,&quot;1&quot;)
        filterDrop.appendChild(filterDrop1)
        var filterDrop2 = document.createElement(&quot;option&quot;)
        filterDrop2.textContent = &quot;updated&quot;
        filterDrop2.setAttribute(&quot;value&quot;,&quot;2&quot;)
        filterDrop.appendChild(filterDrop2)
        var filterDrop3 = document.createElement(&quot;option&quot;)
        filterDrop3.textContent = &quot;Forks&quot;
        filterDrop3.setAttribute(&quot;value&quot;,&quot;3&quot;)
        filterDrop.appendChild(filterDrop3)

        middleBrowseDiv.appendChild(filterDiv)
        filterDiv.appendChild(filterDrop)
        */

        //Display option buttons
        var browseDisplay1 = document.createElement(&quot;div&quot;)
        browseDisplay1.setAttribute(&quot;class&quot;, &quot;browseDisplay&quot;)
        var listPicture = document.createElement(&quot;IMG&quot;)
        listPicture.setAttribute(&quot;src&quot;, &apos;/imgs/list-with-dots.svg&apos;) //https://www.freeiconspng.com/img/1454
        listPicture.setAttribute(&quot;style&quot;, &quot;height: 75%;padding: 3px;&quot;)
        browseDisplay1.appendChild(listPicture)
        middleBrowseDiv.appendChild(browseDisplay1)
        var browseDisplay2 = document.createElement(&quot;div&quot;)
        browseDisplay2.setAttribute(&quot;class&quot;, &quot;browseDisplay active_filter&quot;)
        browseDisplay2.setAttribute(&quot;id&quot;, &quot;thumb&quot;)
        var listPicture2 = document.createElement(&quot;IMG&quot;)
        listPicture2.setAttribute(&quot;src&quot;, &apos;/imgs/thumb_icon.png&apos;) 
        listPicture2.setAttribute(&quot;style&quot;, &quot;height: 80%;padding: 3px;&quot;)
        browseDisplay2.appendChild(listPicture2)
        middleBrowseDiv.appendChild(browseDisplay2)

        //Input to search for projects

        var middleBrowseDiv2 = document.createElement(&quot;div&quot;)
        middleBrowseDiv2.setAttribute(&quot;class&quot;, &quot;middleBrowse2&quot;)
        popup.appendChild(middleBrowseDiv2)

        //login to github button event listenr
        document.getElementById(&quot;loginButton2&quot;).addEventListener(&quot;mousedown&quot;, () =&gt; {
            this.tryLogin()
        })

        searchBar.addEventListener(&apos;keyup&apos;, () =&gt; {
            var opt = document.getElementById(&quot;filterDrop&quot;)
            var strUser = opt.options[opt.selectedIndex].textContent
            this.loadNonGit(strUser)
        })
        
        /* filterDiv.addEventListener(&quot;change&quot;, () =&gt; {

            var opt = document.getElementById(&quot;filterDrop&quot;)
            var strUser = opt.options[opt.selectedIndex].textContent
            this.loadNonGit(strUser)
        })*/
        

        //header for project list style display
        var titlesDiv = document.createElement(&quot;div&quot;)
        titlesDiv.setAttribute(&quot;id&quot;,&quot;titlesDiv&quot;)
        var titles = document.createElement(&quot;div&quot;)
        titles.innerHTML = &quot;&quot;
        titles.setAttribute(&quot;class&quot;,&quot;browseColumn&quot;)
        titlesDiv.appendChild(titles)
        var titles2 = document.createElement(&quot;div&quot;)
        titles2.innerHTML = &quot;Project&quot;
        titles2.setAttribute(&quot;class&quot;,&quot;browseColumn&quot;)
        titlesDiv.appendChild(titles2)
        var titles3 = document.createElement(&quot;div&quot;)
        titles3.innerHTML = &quot;Creator&quot;
        titles3.setAttribute(&quot;class&quot;,&quot;browseColumn&quot;)
        titlesDiv.appendChild(titles3)
        var titles4 = document.createElement(&quot;div&quot;)
        titles4.innerHTML = &quot;Created on&quot;
        titles4.setAttribute(&quot;class&quot;,&quot;browseColumn&quot;)
        titlesDiv.appendChild(titles4)
        var titles5 = document.createElement(&quot;div&quot;)
        titles5.innerHTML = &quot;Last Modified&quot;
        titles5.setAttribute(&quot;class&quot;,&quot;browseColumn&quot;)
        titlesDiv.appendChild(titles5)

        popup.appendChild(titlesDiv)

        this.projectsSpaceDiv = document.createElement(&quot;DIV&quot;)
        this.projectsSpaceDiv.setAttribute(&quot;class&quot;, &quot;float-left-div&quot;)
        this.projectsSpaceDiv.setAttribute(&quot;style&quot;, &quot;overflow-x: hidden; margin-top: 10px; border-top: 1px solid #44444442;&quot;)
        popup.appendChild(this.projectsSpaceDiv)
        
        this.loadNonGit()

        //display options event listeners

        browseDisplay1.addEventListener(&quot;click&quot;, () =&gt; {
            titlesDiv.style.display = &quot;flex&quot;
            browseDisplay2.classList.remove(&quot;active_filter&quot;)
            this.loadNonGit()
        })
        browseDisplay2.addEventListener(&quot;click&quot;, () =&gt; {
            titlesDiv.style.display = &quot;none&quot;
            browseDisplay2.classList.add(&quot;active_filter&quot;)
            this.loadNonGit()
        })
    
    }
    
    /** 
     * Search query without authentication
      */
    this.loadNonGit = function(searchString){    
        //Load All projects

        while (this.projectsSpaceDiv.firstChild) {
            this.projectsSpaceDiv.removeChild(this.projectsSpaceDiv.firstChild)
        }
            
        var octokit = new Octokit({
            userAgent: &apos;Maslow-Create&apos;
        })

        var query
        var owned
        owned = false
        query = &apos; topic:maslowcreate&apos;
        var sortMethod = &quot;stars&quot;  //replace with dropdown input!
            
        if(searchString !== undefined){ //If the empty search returned no results on loading
            query = searchString + &apos; topic:maslowcreate&apos;
        }    

        octokit.search.repos({
            q: query,
            sort: sortMethod,
            per_page: 100,
            page: 1,
            headers: {
                accept: &apos;application/vnd.github.mercy-preview+json&apos;
            }
        }).then(result =&gt; {
            result.data.items.forEach(repo =&gt; {
                   
                const thumbnailPath = &quot;https://raw.githubusercontent.com/&quot;+repo.full_name+&quot;/master/project.svg?sanitize=true&quot;
                this.addProject(repo.name, repo.id, repo.owner.login, repo.created_at, repo.updated_at, owned, thumbnailPath)
            })
               
        }) 
    }
    /** 
     * Search for the name of a project and then return results which match that search.
     */
    this.loadProjectsBySearch = function(ev, searchString, sorting){

        if(ev.key == &quot;Enter&quot; || ev.target == document.getElementById(&quot;filterDrop&quot;)){
            //Remove projects shown now
            while (this.projectsSpaceDiv.firstChild) {
                this.projectsSpaceDiv.removeChild(this.projectsSpaceDiv.firstChild)
            }
            //Load projects
            var query
            var owned
            var sortMethod = sorting  //drop down input. temporarily inactive until we figure some better way to sort
            if(document.getElementsByClassName(&quot;tablinks active&quot;)[0].id == &quot;yoursButton&quot;){
                owned = true
                query = searchString + &apos; &apos; + &apos;fork:true user:&apos; + currentUser + &apos; topic:maslowcreate&apos;
            }
            else{
                owned = false
                query = searchString + &apos; topic:maslowcreate&apos;
            }
            
            //Figure out how many repos this user has, search will throw an error if they have 0;
            octokit.repos.list({
                affiliation: &apos;owner&apos;,
            }).then(({data}) =&gt; {
                if(data.length == 0){                   //If the user has no repos at all, the search will fail so we want to spawn a popup here and clone the example
                    this.cloneExampleProjectPopup()
                }
            })
            
            octokit.search.repos({
                q: query,
                sort: sortMethod,
                per_page: 100,
                page: 1,
                headers: {
                    accept: &apos;application/vnd.github.mercy-preview+json&apos;
                }
            }).then(result =&gt; {
                result.data.items.forEach(repo =&gt; {
                    const thumbnailPath = &quot;https://raw.githubusercontent.com/&quot;+repo.full_name+&quot;/master/project.svg?sanitize=true&quot;
                    this.addProject(repo.name, repo.id, repo.owner.login, repo.created_at, repo.updated_at, owned, thumbnailPath)
                })
                if(result.data.items.length == 0 &amp;&amp; searchString == &apos;&apos;){ //If the empty search returned no results on loading
                    this.cloneExampleProjectPopup()
                }
            }) 
        } 
    }
    
    /** 
     * Clone a copy of the example project.
     */
    this.cloneExampleProjectPopup = function(){
        this.forkByID(177732883) //This is the ID of the example project
    }
    
    /** 
     * Adds a new project to the load projects display.
     */
    this.NewProject = function(projectName, id, owned, thumbnailPath){
        //create a project element to display
        
        var project = document.createElement(&quot;DIV&quot;)
        project.classList.add(&quot;newProjectdiv&quot;)
        
        var projectPicture = document.createElement(&quot;IMG&quot;)
        projectPicture.setAttribute(&quot;src&quot;, thumbnailPath)
        projectPicture.setAttribute(&quot;onerror&quot;, &quot;this.src=&apos;/defaultThumbnail.svg&apos;&quot;)
        projectPicture.setAttribute(&quot;style&quot;, &quot;height: 80%; float: left;&quot;)
        project.appendChild(projectPicture)
        
        var projectText = document.createElement(&quot;span&quot;)
        projectText.innerHTML = &quot;Start a new project&quot;
        projectText.setAttribute(&quot;style&quot;,&quot;align-self: center&quot;)
        project.appendChild(projectText)

        document.querySelector(&quot;.newProject&quot;).appendChild(project) 
        
        project.addEventListener(&apos;click&apos;, () =&gt; {
            this.projectClicked(projectName, id, owned)
        })

    }
    /** 
     * Adds a new project to the load projects display.
     */
    this.addProject = function(projectName, id, owner, createdAt, updatedAt, owned, thumbnailPath){
        //create a project element to display
        if (document.getElementById(&quot;thumb&quot;).classList.contains(&quot;active_filter&quot;)){
            
            this.projectsSpaceDiv.classList.remove(&quot;float-left-div-thumb&quot;)
            var project = document.createElement(&quot;DIV&quot;)
            var projectPicture = document.createElement(&quot;IMG&quot;)
            projectPicture.setAttribute(&quot;src&quot;, thumbnailPath)
            projectPicture.setAttribute(&quot;onerror&quot;, &quot;this.src=&apos;/defaultThumbnail.svg&apos;&quot;)
            projectPicture.setAttribute(&quot;style&quot;, &quot;width: 100%; height: 100%;&quot;)
            project.appendChild(projectPicture)
            project.appendChild(document.createElement(&quot;BR&quot;))
            
            var shortProjectName
            if(projectName.length &gt; 15){
                shortProjectName = document.createTextNode(projectName.substr(0,9)+&quot;..&quot;)
            }
            else{
                shortProjectName = document.createTextNode(projectName)
            }
            project.classList.add(&quot;project&quot;)
            project.setAttribute(&quot;id&quot;, projectName)
            project.appendChild(shortProjectName) 
            this.projectsSpaceDiv.appendChild(project) 
            
            document.getElementById(projectName).addEventListener(&apos;click&apos;, () =&gt; {
                this.projectClicked(projectName, id, owned)
            })
        }
        else{
            this.projectsSpaceDiv.classList.add(&quot;float-left-div-thumb&quot;)
            project = document.createElement(&quot;DIV&quot;)
            project.setAttribute(&quot;style&quot;, &quot;display:flex; flex-direction:row; flex-wrap:wrap; width: 100%; border-bottom: 1px solid darkgrey;&quot;)
            projectPicture = document.createElement(&quot;IMG&quot;)
            projectPicture.setAttribute(&quot;src&quot;, thumbnailPath)
            //projectPicture.setAttribute(&quot;onerror&quot;, &quot;this.src=&apos;/defaultThumbnail.svg&apos;&quot;)
            projectPicture.setAttribute(&quot;class&quot;, &quot;browseColumn&quot;)
            project.appendChild(projectPicture)
            
            shortProjectName = document.createElement(&quot;DIV&quot;)
            shortProjectName.innerHTML = projectName
            shortProjectName.setAttribute(&quot;class&quot;, &quot;browseColumn&quot;)
            
            project.setAttribute(&quot;id&quot;, projectName)
            project.classList.add(&quot;project&quot;)
            project.appendChild(shortProjectName) 

            var ownerName = document.createElement(&quot;DIV&quot;)
            var ownerNameIn = document.createTextNode(owner)
            ownerName.appendChild(ownerNameIn) 
            ownerName.setAttribute(&quot;class&quot;, &quot;browseColumn&quot;)
            project.appendChild(ownerName) 
            

            var date = new Date(createdAt)
            var months = [&quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;, &quot;August&quot;, &quot;September&quot;, &quot;October&quot;, &quot;November&quot;, &quot;December&quot;]
            var createdTime = document.createElement(&quot;DIV&quot;)
            createdTime.setAttribute(&quot;class&quot;, &quot;browseColumn&quot;)
            var createdTimeIn = document.createTextNode(months[date.getMonth()] + &quot; &quot; + date.getFullYear())
            createdTime.appendChild(createdTimeIn) 
            project.appendChild(createdTime) 

            var updated = new Date(updatedAt)
            var updatedTime = document.createElement(&quot;DIV&quot;)
            var updatedTimeIn = document.createTextNode(months[updated.getMonth()] + &quot; &quot; + date.getFullYear())
            updatedTime.appendChild(updatedTimeIn)
            updatedTime.setAttribute(&quot;class&quot;, &quot;browseColumn&quot;)
            project.appendChild(updatedTime) 

            this.projectsSpaceDiv.appendChild(project) 
            
            document.getElementById(projectName).addEventListener(&apos;click&apos;, () =&gt; {
                this.projectClicked(projectName, id, owned)
            })
        }

    }
    
    /** 
     * Runs when you click on a project.
     */
    this.projectClicked = function(projectName, projectID, owned){
        //runs when you click on one of the projects
        if(projectName == &quot;New Project&quot;){
            this.createNewProjectPopup()
        }
        else if(owned){
            this.loadProject(projectName)
        }
        else{
            window.open(&apos;/run?&apos;+projectID)
        }
    }
    
    /** 
     * Runs when you switch tabs up top.
     */
    this.openTab = function(evt, tabName) {

        // Declare all variables
        var i, tabcontent, tablinks

        // Get all elements with class=&quot;tabcontent&quot; and hide them
        tabcontent = document.getElementsByClassName(&quot;tabcontent&quot;)
        for (i = 0; i &lt; tabcontent.length; i++) {
            tabcontent[i].style.display = &quot;none&quot;
        }

        // Get all elements with class=&quot;tablinks&quot; and remove the class &quot;active&quot;
        tablinks = document.getElementsByClassName(&quot;tablinks&quot;)
        for (i = 0; i &lt; tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(&quot; active&quot;, &quot;&quot;)
        }

        // Show the current tab, and add an &quot;active&quot; class to the button that opened the tab
        if (tabName == &quot;yoursButton&quot;){
            document.getElementById(tabName).style.display = &quot;none&quot;
            document.querySelector(&quot;.topBrowse&quot;).style.display = &quot;flex&quot;
        }
        else{
            document.getElementById(&quot;yoursButton&quot;).style.display = &quot;block&quot;
            document.querySelector(&quot;.topBrowse&quot;).style.display = &quot;none&quot;
        }
        document.getElementById(myTab).className += &quot; active&quot;
      
        //Click on the search bar so that when you start typing it shows updateCommands
        document.getElementById(&apos;menuInput&apos;).focus()
      
      
        this.loadProjectsBySearch({key: &quot;Enter&quot;}, document.getElementById(&quot;project_search&quot;).value)
    }
    
    /** 
     * The popup to create a new project (giving it a name and whatnot).
     */
    this.createNewProjectPopup = function(){
        //Clear the popup and populate the fields we will need to create the new repo
        
        while (popup.firstChild) {
            popup.removeChild(popup.firstChild)
        }
        popup.setAttribute(&quot;style&quot;, &quot;padding:2% 0&quot;)
        //Project name
        // &lt;div class=&quot;form&quot;&gt;
        var createNewProjectDiv = document.createElement(&quot;DIV&quot;)
        createNewProjectDiv.setAttribute(&quot;class&quot;, &quot;form&quot;)
        createNewProjectDiv.setAttribute(&quot;style&quot;, &quot;color:whitesmoke&quot;)
        
        //Add a title
        var header = document.createElement(&quot;H1&quot;)
        var title = document.createTextNode(&quot;Create a new project&quot;)
        header.appendChild(title)
        createNewProjectDiv.appendChild(header)
        
        //Create the form object
        var form = document.createElement(&quot;form&quot;)
        form.setAttribute(&quot;class&quot;, &quot;login-form&quot;)
        createNewProjectDiv.appendChild(form)
        
        //Create the name field
        var name = document.createElement(&quot;input&quot;)
        name.setAttribute(&quot;id&quot;,&quot;project-name&quot;)
        name.setAttribute(&quot;type&quot;,&quot;text&quot;)
        name.setAttribute(&quot;placeholder&quot;,&quot;Project name&quot;)
        form.appendChild(name)
        
        //Add the description field
        var description = document.createElement(&quot;input&quot;)
        description.setAttribute(&quot;id&quot;, &quot;project-description&quot;)
        description.setAttribute(&quot;type&quot;, &quot;text&quot;)
        description.setAttribute(&quot;placeholder&quot;, &quot;Project description&quot;)
        form.appendChild(description)
        
        //Add the button
        var createButton = document.createElement(&quot;button&quot;)
        createButton.setAttribute(&quot;type&quot;, &quot;button&quot;)
        createButton.setAttribute(&quot;style&quot;, &quot;height: 50px; border: 1px solid whitesmoke;&quot;)
        createButton.addEventListener(&apos;click&apos;, () =&gt; {
            this.createNewProject()
        })
        var buttonText = document.createTextNode(&quot;Create Project&quot;)
        createButton.appendChild(buttonText)
        form.appendChild(createButton)
    
        popup.appendChild(createNewProjectDiv)

    }
    
    /** 
     * Open a new tab with a sharable copy of the project.
     */
    this.shareOpenedProject = function(){
        alert(&quot;A page with a shareable url to this project will open in a new window. Share the link to that page with anyone you would like to share the project with.&quot;)
            
        octokit.repos.get({
            owner: currentUser,
            repo: currentRepoName
        }).then(result =&gt; {
            var ID = result.data.id
            window.open(&apos;/run?&apos;+ID)
        })
    }
    
    /** 
     * Open a new tab with the github page for the project.
     */
    this.openGitHubPage = function(){
        //Open the github page for the current project in a new tab
        octokit.repos.get({
            owner: currentUser,
            repo: currentRepoName
        }).then(result =&gt; {
            var url = result.data.html_url
            window.open(url)
        })
    }
    
    /** 
     * Open a new tab with the README page for the project.
     */
    this.openREADMEPage = function(){
        //Open the github page for the current project in a new tab
        octokit.repos.get({
            owner: currentUser,
            repo: currentRepoName
        }).then(result =&gt; {
            var url = result.data.html_url + &apos;/blob/master/README.md&apos;
            window.open(url)
        })
    }
    
    /** 
     * Open a new tab with the Bill Of Materials page for the project.
     */
    this.openBillOfMaterialsPage = function(){
        //Open the github page for the current project in a new tab
        octokit.repos.get({
            owner: currentUser,
            repo: currentRepoName
        }).then(result =&gt; {
            var url = result.data.html_url + &apos;/blob/master/BillOfMaterials.md&apos;
            window.open(url)
        })
    }
    
    /** 
     * Search github for projects which match a string.
     */
    this.searchGithub = async (searchString) =&gt; {
        return await octokit.search.repos({
            q: searchString + &apos; topic:maslowcreate&apos;,
            sort: &apos;stars&apos;,
            per_page: 10,
            page: 1,
            headers: {
                accept: &apos;application/vnd.github.mercy-preview+json&apos;
            }
        })
    }
    
    /** 
     * Send user to GitHub settings page to delete project.
     */
    this.deleteProject = function(){
        //Open the github page for the current project in a new tab
        octokit.repos.get({
            owner: currentUser,
            repo: currentRepoName
        }).then(result =&gt; {
            var url = result.data.html_url + &apos;/settings&apos;
            window.open(url)
        })
    }

    /** 
     * Open pull request if it&apos;s a forked project.
     */
    this.makePullRequest = function(){
      
        //Open the github page for the current project in a new tab
        octokit.repos.get({
            owner: currentUser,
            repo: currentRepoName
        }).then(result =&gt; {
            let parent= result.data.parent.owner.login
            let fullName= result.data.full_name
            let fullParentName= result.data.parent.full_name
            let defaultBranch = result.data.default_branch
            let parentDefaultBranch = result.data.parent.default_branch

            //Remove everything in the popup now
            while (popup.firstChild) {
                popup.removeChild(popup.firstChild)
            }
                    
            popup.classList.remove(&apos;off&apos;)

            var subButtonDiv = document.createElement(&apos;div&apos;)
            subButtonDiv.setAttribute(&quot;class&quot;, &quot;form&quot;)

            //Close button (Mac style)
            if(GlobalVariables.topLevelMolecule &amp;&amp; GlobalVariables.topLevelMolecule.name != &quot;Maslow Create&quot;){ //Only offer a close button if there is a project to go back to
                var closeButton = document.createElement(&quot;button&quot;)
                closeButton.setAttribute(&quot;class&quot;, &quot;closeButton&quot;)
                closeButton.addEventListener(&quot;click&quot;, () =&gt; {
                    popup.classList.add(&apos;off&apos;)
                })
                popup.appendChild(closeButton)
            }
                    
            //Add a title

            var title = document.createElement(&quot;H3&quot;)
            title.appendChild(document.createTextNode(&quot;OPEN A PULL REQUEST&quot;))
            subButtonDiv.setAttribute(&apos;style&apos;,&apos;color:white;&apos;)
            subButtonDiv.appendChild(title)
            subButtonDiv.appendChild(document.createElement(&quot;br&quot;))

            var mergeTitles = document.createElement(&quot;div&quot;)
            mergeTitles.setAttribute(&quot;class&quot;,&quot;pull-title&quot;)
            var base = document.createElement(&quot;p&quot;)
            base.appendChild(document.createTextNode(fullParentName + &quot; : &quot; + parentDefaultBranch))
            var arrow = document.createElement(&quot;p&quot;)
            arrow.innerHTML=&quot;&amp;#8592;&quot;
            mergeTitles.appendChild(arrow)
            var head = document.createElement(&quot;p&quot;)
            head.appendChild(document.createTextNode(fullName + &quot; : &quot; + defaultBranch))
            mergeTitles.appendChild(base)
            mergeTitles.appendChild(arrow)
            mergeTitles.appendChild(head)

            subButtonDiv.appendChild(mergeTitles)
                    
            var form = document.createElement(&quot;form&quot;)
            subButtonDiv.appendChild(form)
            var titleDiv = document.createElement(&quot;div&quot;)
            titleDiv.setAttribute(&quot;class&quot;,&quot;pullDiv&quot;)
            var titleLabel = document.createElement(&quot;label&quot;)
            titleLabel.appendChild(document.createTextNode(&quot;Title&quot;))

            //Create the title field
            var titleInput = document.createElement(&quot;input&quot;)
            titleInput.setAttribute(&quot;id&quot;,&quot;pull-title&quot;)
            titleInput.setAttribute(&quot;type&quot;,&quot;text&quot;)
            titleInput.setAttribute(&quot;placeholder&quot;,&quot;Pull Request Title&quot;)
            titleDiv.appendChild(titleLabel)
            titleDiv.appendChild(titleInput)

            var bodyDiv = document.createElement(&quot;div&quot;)
            bodyDiv.setAttribute(&quot;class&quot;,&quot;pullDiv&quot;)
            var bodyLabel = document.createElement(&quot;label&quot;)
            bodyLabel.appendChild(document.createTextNode(&quot;Message&quot;))

            var bodyInput = document.createElement(&quot;textarea&quot;)
            bodyInput.setAttribute(&quot;id&quot;,&quot;pull-message&quot;)
            bodyInput.setAttribute(&quot;type&quot;,&quot;text&quot;)
            bodyInput.setAttribute(&quot;placeholder&quot;,&quot;Pull Request Message&quot;)
            bodyDiv.appendChild(bodyLabel)
            bodyDiv.appendChild(bodyInput)
                    
            var button = document.createElement(&quot;button&quot;)
            button.setAttribute(&quot;type&quot;, &quot;button&quot;)
            button.setAttribute(&quot;style&quot;, &quot;border:2px solid white;&quot;)
            button.appendChild(document.createTextNode(&quot;Create pull request&quot;))
                    
            button.addEventListener(&quot;click&quot;, () =&gt; {
                var pullTitle= document.getElementById(&quot;pull-title&quot;).value
                var pullMessage= document.getElementById(&quot;pull-message&quot;).value
                octokit.pulls.create({
                    owner: parent,
                    repo: currentRepoName,
                    title: pullTitle, //input from popup,
                    body: pullMessage, //input from popup,
                    head: currentUser+ &quot;:&quot; + &quot;master&quot;,
                    base: &quot;master&quot;
                }).then(result =&gt; {
                    var url = result.data.html_url
                    window.open(url)
                }).then(() =&gt;{
                    popup.classList.add(&apos;off&apos;)
                })
            })
            form.appendChild(titleDiv)
            form.appendChild(bodyDiv)
            form.appendChild(button)
            popup.appendChild(subButtonDiv)

        })
        
    }
    
    /** 
     * Creates a new blank project.
     */
    this.createNewProject = function(){
        
        if(typeof intervalTimer != undefined){
            clearInterval(intervalTimer) //Turn of auto saving
        }
        
        //Get name and description
        var name = document.getElementById(&apos;project-name&apos;).value
        var description = document.getElementById(&apos;project-description&apos;).value
        
        //Load a blank project
        GlobalVariables.topLevelMolecule = new Molecule({
            x: 0, 
            y: 0, 
            topLevel: true, 
            name: name,
            atomType: &quot;Molecule&quot;,
            uniqueID: GlobalVariables.generateUniqueID()
        })
        
        GlobalVariables.currentMolecule = GlobalVariables.topLevelMolecule
        
        //Create a new repo
        octokit.repos.createForAuthenticatedUser({
            name: name,
            description: description
        }).then(result =&gt; {
            //Once we have created the new repo we need to create a file within it to store the project in
            currentRepoName = result.data.name
            var path = &quot;project.maslowcreate&quot;
            var content = window.btoa(JSON.stringify(GlobalVariables.topLevelMolecule.serialize(null), null, 4)) // create a file with the new molecule in it and base64 encode it
            octokit.repos.createFile({
                owner: currentUser,
                repo: currentRepoName,
                path: path,
                message: &quot;initialize repo&quot;, 
                content: content
            }).then(() =&gt; {
                //Then create the BOM file
                content = window.btoa(bomHeader) // create a file with just the header in it and base64 encode it
                octokit.repos.createFile({
                    owner: currentUser,
                    repo: currentRepoName,
                    path: &quot;BillOfMaterials.md&quot;,
                    message: &quot;initialize BOM&quot;, 
                    content: content
                }).then(() =&gt; {
                    //Then create the README file
                    content = window.btoa(readmeHeader) // create a file with just the word &quot;init&quot; in it and base64 encode it
                    octokit.repos.createFile({
                        owner: currentUser,
                        repo: currentRepoName,
                        path: &quot;README.md&quot;,
                        message: &quot;initialize README&quot;, 
                        content: content
                    }).then(() =&gt; {
                        intervalTimer = setInterval(() =&gt; { this.saveProject() }, 120000) //Save the project regularly
                    })
                })
            })
            
            //Update the project topics
            octokit.repos.replaceTopics({
                owner: currentUser,
                repo: currentRepoName,
                names: [&quot;maslowcreate&quot;, &quot;maslowcreate-project&quot;],
                headers: {
                    accept: &apos;application/vnd.github.mercy-preview+json&apos;
                }
            })
        })
        
        GlobalVariables.currentMolecule.backgroundClick()
        
        //Clear and hide the popup
        while (popup.firstChild) {
            popup.removeChild(popup.firstChild)
        }
        popup.classList.add(&apos;off&apos;)
        
        
    }

    /** 
     * Save the current project to github.
     */
    this.saveProject = function(){
        //Save the current project into the github repo
        if(currentRepoName != null){
            
            //Store the target repo incase a new project is loaded during the save
            const saveRepoName = currentRepoName
            const saveUser = currentUser
            
            if(typeof intervalTimer != undefined){
                clearInterval(intervalTimer) //Turn off auto saving to prevent it from saving again during this save
            }
            this.progressSave(0)
            var shape = null
            if(GlobalVariables.topLevelMolecule.value != null &amp;&amp; typeof GlobalVariables.topLevelMolecule.value != &apos;number&apos;){
                shape = GlobalVariables.topLevelMolecule.value
            }else{
                shape = {
                    &quot;solid&quot;: [
                        [ [ [ 5.000000000000001, 5, 10 ],
                            [ -5, 5.000000000000001, 10 ],
                            [ -5.000000000000002, -4.999999999999999, 10 ],
                            [ 4.999999999999999, -5.000000000000002, 10 ] ] ],
                        [ [ [ 4.999999999999999, -5.000000000000002, 0 ],
                            [ -5.000000000000002, -4.999999999999999, 0 ],
                            [ -5, 5.000000000000001, 0 ],
                            [ 5.000000000000001, 5, 0 ] ] ],
                        [ [ [ 4.999999999999999, -5.000000000000002, 0 ],
                            [ 4.999999999999999, -5.000000000000002, 10 ],
                            [ -5.000000000000002, -4.999999999999999, 10 ],
                            [ -5.000000000000002, -4.999999999999999, 0 ] ] ],
                        [ [ [ -5.000000000000002, -4.999999999999999, 0 ],
                            [ -5.000000000000002, -4.999999999999999, 10 ],
                            [ -5, 5.000000000000001, 10 ],
                            [ -5, 5.000000000000001, 0 ] ] ],
                        [ [ [ -5, 5.000000000000001, 0 ],
                            [ -5, 5.000000000000001, 10 ],
                            [ 5.000000000000001, 5, 10 ],
                            [ 5.000000000000001, 5, 0 ] ] ],
                        [ [ [ 5.000000000000001, 5, 0 ],
                            [ 5.000000000000001, 5, 10 ],
                            [ 4.999999999999999, -5.000000000000002, 10 ],
                            [ 4.999999999999999, -5.000000000000002, 0 ] ] ]
                    ]
                }
            }
            
            const threadCompute = async (values, key) =&gt; {
                return await GlobalVariables.saveWorker({values: values, key: key})
            } 
            threadCompute([shape], &quot;SVG Picture&quot;).then(contentSvg =&gt; {
                this.progressSave(10)
                
                var bomContent = bomHeader
                extractBomTags(GlobalVariables.topLevelMolecule.value).then(bomItems =&gt; {
                    var totalParts = 0
                    var totalCost  = 0
                    if(bomItems != undefined){
                        bomItems.forEach(item =&gt; {
                            totalParts += item.numberNeeded
                            totalCost  += item.costUSD
                            bomContent = bomContent + &quot;\n|&quot; + item.BOMitemName + &quot;|&quot; + item.numberNeeded + &quot;|$&quot; + item.costUSD.toFixed(2) + &quot;|&quot; + item.source + &quot;|&quot;
                        })
                    }
                    bomContent = bomContent + &quot;\n|&quot; + &quot;Total: &quot; + &quot;|&quot; + totalParts + &quot;|$&quot; + totalCost.toFixed(2) + &quot;|&quot; + &quot; &quot; + &quot;|&quot;
                    bomContent = bomContent+&quot;\n\n 3xCOG MSRP: $&quot; + (3*totalCost).toFixed(2)
                    
                    
                    var readmeContent = readmeHeader + &quot;\n\n&quot; + &quot;# &quot; + saveRepoName + &quot;\n\n![](/project.svg)\n\n&quot;
                    GlobalVariables.topLevelMolecule.requestReadme().forEach(item =&gt; {
                        readmeContent = readmeContent + item + &quot;\n\n\n&quot;
                    })
                    
                    const projectContent = JSON.stringify(GlobalVariables.topLevelMolecule.serialize(null), null, 4)
                    
                    this.createCommit(octokit,{
                        owner: saveUser,
                        repo: saveRepoName,
                        base: &apos;master&apos;, /* optional: defaults to default branch */
                        changes: {
                            files: {
                                &apos;project.svg&apos;: contentSvg,
                                &apos;BillOfMaterials.md&apos;: bomContent,
                                &apos;README.md&apos;: readmeContent,
                                &apos;project.maslowcreate&apos;: projectContent
                            },
                            commit: &apos;Autosave&apos;
                        }
                    })
                })
            })
        }
    }
    /** 
     * Creates saving/saved pop up
     */
    this.progressSave = function (progress) { 
        var popUp = document.getElementById(&quot;popUp&quot;)   
        let popUpBox = document.querySelector(&apos;#Progress_Status&apos;) 
        //var width = 1; 
        popUp.setAttribute(&quot;style&quot;,&quot;display:block&quot;)
        popUpBox.setAttribute(&quot;style&quot;,&quot;display:block&quot;)
        
        if (progress &gt;= 100) { 
            popUp.style.width = progress + &apos;%&apos; 
            popUp.textContent = &quot;Project Saved&quot;
            setTimeout(function() {
                popUp.setAttribute(&quot;style&quot;,&quot;display:none&quot;)
                popUpBox.setAttribute(&quot;style&quot;,&quot;display:none&quot;)
            }, 4000)
        } else { 
            popUp.textContent = &quot;Saving...&quot;
            popUp.style.width = progress + &apos;%&apos;  
        } 
    } 
        
    /** 
     * Create a commit as part of the saving process.
     */
    this.createCommit = async function(octokit, { owner, repo, base, changes }) {
        this.progressSave(30)
        let response

        if (!base) {
            response = await octokit.repos.get({ owner, repo })
            base = response.data.default_branch
        }
        this.progressSave(40)
        response = await octokit.repos.listCommits({
            owner,
            repo,
            sha: base,
            per_page: 1
        })
        let latestCommitSha = response.data[0].sha
        const treeSha = response.data[0].commit.tree.sha
        this.progressSave(60)
      
        response = await octokit.git.createTree({
            owner,
            repo,
            base_tree: treeSha,
            tree: Object.keys(changes.files).map(path =&gt; {
                return {
                    path,
                    mode: &apos;100644&apos;,
                    content: changes.files[path]
                }
            })
        })
        const newTreeSha = response.data.sha
        this.progressSave(80)

        response = await octokit.git.createCommit({
            owner,
            repo,
            message: changes.commit,
            tree: newTreeSha,
            parents: [latestCommitSha]
        })
        latestCommitSha = response.data.sha

        this.progressSave(90)
      
        await octokit.git.updateRef({
            owner,
            repo,
            sha: latestCommitSha,
            ref: `heads/master`,
            force: true
        })
        this.progressSave(100)
        console.warn(&quot;Project saved&quot;)
       
    }
    
    /** 
     * Loads a project from github by name.
     */
    this.loadProject = async function(projectName){
        if(typeof intervalTimer != undefined){
            clearInterval(intervalTimer) //Turn off auto saving
        }

        //Clear and hide the popup
        while (popup.firstChild) {
            popup.removeChild(popup.firstChild)
        }
        popup.classList.add(&apos;off&apos;)
        
        currentRepoName = projectName
        
        //Load a blank project
        GlobalVariables.topLevelMolecule = new Molecule({
            x: 0, 
            y: 0, 
            topLevel: true, 
            atomType: &quot;Molecule&quot;
        })
        
        GlobalVariables.currentMolecule = GlobalVariables.topLevelMolecule
        
        octokit.repos.getContents({
            owner: currentUser,
            repo: projectName,
            path: &apos;project.maslowcreate&apos;
        }).then(result =&gt; {
            //content will be base64 encoded
            let rawFile = JSON.parse(atob(result.data.content))
            
            
            var moleculesList = rawFile.molecules
            
            if(rawFile.circleSegmentSize){
                GlobalVariables.circleSegmentSize = rawFile.circleSegmentSize
            }
            
            //Load the top level molecule from the file
            GlobalVariables.topLevelMolecule.deserialize(moleculesList, moleculesList.filter((molecule) =&gt; { return molecule.topLevel == true })[0].uniqueID)
            intervalTimer = setInterval(() =&gt; this.saveProject(), 120000) //Save the project regularly
        })
        octokit.repos.get({
            owner: currentUser,
            repo: currentRepoName
        }).then(result =&gt; {
            GlobalVariables.fork = result.data.fork
            if(!GlobalVariables.fork){
                document.getElementById(&quot;pull_top&quot;).style.display = &quot;none&quot;
            }      
        })                
    }
    
    /** 
     * Loads a project from github by its github ID.
     */
    this.getProjectByID = async function(id, saveUserInfo){
        let repo = await octokit.request(&apos;GET /repositories/:id&apos;, {id})
        //Find out the owners info;
        const user     = repo.data.owner.login
        const repoName = repo.data.name
        //Get the file contents
        let result = await octokit.repos.getContents({
            owner: user,
            repo: repoName,
            path: &apos;project.maslowcreate&apos;
        })
        
        //If this is the top level we will save the rep info at the top level
        if(saveUserInfo){
            currentUser = user
            currentRepoName = repoName
        }
        
        return result
    }
    
    /** 
     * Export a molecule as a new github project.
     */
    this.exportCurrentMoleculeToGithub = function(molecule){
        
        //Get name and description
        var name = molecule.name
        var description = &quot;A stand alone molecule exported from Maslow Create&quot;
        
        //Create a new repo
        octokit.repos.createForAuthenticatedUser({
            name: name,
            description: description
        }).then(result =&gt; {
            //Once we have created the new repo we need to create a file within it to store the project in
            var repoName = result.data.name
            var id       = result.data.id
            var path     = &quot;project.maslowcreate&quot;
            var content  = window.btoa(&quot;init&quot;) // create a file with just the word &quot;init&quot; in it and base64 encode it
            octokit.repos.createFile({
                owner: currentUser,
                repo: repoName,
                path: path,
                message: &quot;initialize repo&quot;, 
                content: content
            }).then(() =&gt; {
                
                //Save the molecule into the newly created repo
                
                var path = &quot;project.maslowcreate&quot;
                
                molecule.topLevel = true //force the molecule to export in the long form as if it were the top level molecule
                var content = window.btoa(JSON.stringify(molecule.serialize(null), null, 4)) //Convert the passed molecule object to a JSON string and then convert it to base64 encoding
                
                //Get the SHA for the file
                octokit.repos.getContents({
                    owner: currentUser,
                    repo: repoName,
                    path: path
                }).then(result =&gt; {
                    var sha = result.data.sha
                    
                    //Save the repo to the file
                    octokit.repos.updateFile({
                        owner: currentUser,
                        repo: repoName,
                        path: path,
                        message: &quot;export Molecule&quot;, 
                        content: content,
                        sha: sha
                    }).then(() =&gt; {
                        //Replace the existing molecule now that we just exported
                        molecule.replaceThisMoleculeWithGithub(id)
                    })
                })

            })
            
            //Update the project topics
            octokit.repos.replaceTopics({
                owner: currentUser,
                repo: repoName,
                names: [&quot;maslowcreate&quot;, &quot;maslowcreate-molecule&quot;],
                headers: {
                    accept: &apos;application/vnd.github.mercy-preview+json&apos;
                }
            })
            
        })
    }

    /** 
     * Like a project on github by unique ID.
     */
    this.starProject = function(id){
        //Authenticate - Initialize with OAuth.io app public key
        OAuth.initialize(&apos;BYP9iFpD7aTV9SDhnalvhZ4fwD8&apos;)
        // Use popup for oauth
        OAuth.popup(&apos;github&apos;).then(github =&gt; {

            octokit = new Octokit({
                auth: github.access_token
            })
            
            octokit.request(&apos;GET /repositories/:id&apos;, {id}).then(result =&gt; {
                //Find out the information of who owns the project we are trying to like
                
                var user     = result.data.owner.login
                var repoName = result.data.name
                
                octokit.repos.listTopics({
                    owner: user, 
                    repo: repoName,
                    headers: {
                        accept: &apos;application/vnd.github.mercy-preview+json&apos;
                    }
                }).then(()=&gt; { 
                    //Find out if the project has been starred and unstar if it is
                    octokit.activity.checkStarringRepo({
                        owner:user,
                        repo: repoName
                    }).then(() =&gt; { 
                        var button= document.getElementById(&quot;Star-button&quot;)
                        button.setAttribute(&quot;class&quot;,&quot;browseButton&quot;)
                        button.innerHTML = &quot;Star&quot;
                        octokit.activity.unstarRepo({
                            owner: user,
                            repo: repoName
                        })
                    })
                        
                }).then(() =&gt;{ 
                    var button= document.getElementById(&quot;Star-button&quot;)
                    button.setAttribute(&quot;class&quot;,&quot;liked&quot;)
                    button.innerHTML = &quot;Starred&quot;
                    octokit.activity.starRepo({
                        owner: user,
                        repo: repoName
                    })
                })
            })
        })
    }
    /** 
     * Fork a project on github by unique ID.
     */
    this.forkByID = function(id){
        
        //Authenticate - Initialize with OAuth.io app public key
        OAuth.initialize(&apos;BYP9iFpD7aTV9SDhnalvhZ4fwD8&apos;)
        // Use popup for oauth
        OAuth.popup(&apos;github&apos;).then(github =&gt; {

            octokit = new Octokit({
                auth: github.access_token
            })
            
            octokit.request(&apos;GET /repositories/:id&apos;, {id}).then(result =&gt; {
                //Find out the information of who owns the project we are trying to fork
                var user     = result.data.owner.login
                var repoName = result.data.name
                
                octokit.repos.listTopics({
                    owner: user, 
                    repo: repoName,
                    headers: {
                        accept: &apos;application/vnd.github.mercy-preview+json&apos;
                    }
                }).then(result =&gt; {
                    var topics = result.data.names
                    
                    //Create a fork of the project with the found user name and repo name under your account
                    octokit.repos.createFork({
                        owner: user, 
                        repo: repoName,
                        headers: {
                            accept: &apos;application/vnd.github.mercy-preview+json&apos;
                        }
                    }).then(result =&gt; {
                        var repoName = result.data.name
                        //Manually copy over the topics which are lost in forking
                        octokit.repos.replaceTopics({
                            owner: result.data.owner.login,
                            repo: result.data.name,
                            names: topics,
                            headers: {
                                accept: &apos;application/vnd.github.mercy-preview+json&apos;
                            }
                        }).then(() =&gt; {
                            
                            //Remove everything in the popup now
                            while (popup.firstChild) {
                                popup.removeChild(popup.firstChild)
                            }
                            
                            popup.classList.remove(&apos;off&apos;)
                            popup.setAttribute(&quot;style&quot;, &quot;text-align: center&quot;)

                            var subButtonDiv = document.createElement(&apos;div&apos;)
                            subButtonDiv.setAttribute(&quot;class&quot;, &quot;form&quot;)
                            
                            //Add a title
                            var title = document.createElement(&quot;H3&quot;)
                            title.appendChild(document.createTextNode(&quot;A copy of the project &apos;&quot; + repoName + &quot;&apos; has been copied and added to your projects. You can view it by clicking the button below.&quot;))
                            subButtonDiv.setAttribute(&apos;style&apos;,&apos;color:white;&apos;)
                            subButtonDiv.appendChild(title)
                            subButtonDiv.appendChild(document.createElement(&quot;br&quot;))
                            
                            var form = document.createElement(&quot;form&quot;)
                            subButtonDiv.appendChild(form)
                            var button = document.createElement(&quot;button&quot;)
                            button.setAttribute(&quot;type&quot;, &quot;button&quot;)
                            button.setAttribute(&quot;style&quot;, &quot;border:2px solid white;&quot;)
                            button.appendChild(document.createTextNode(&quot;View Projects&quot;))
                            button.addEventListener(&quot;click&quot;, () =&gt; {
                                window.location.href = &apos;/&apos;
                            })
                            form.appendChild(button)
                            popup.appendChild(subButtonDiv)
                        })
                    })
                })
            })
        })
    }
}</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
